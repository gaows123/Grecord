\hypertarget{obstacle__layer_8h_source}{}\doxysection{obstacle\+\_\+layer.\+h}
\label{obstacle__layer_8h_source}\index{costmap\_2d/include/costmap\_2d/obstacle\_layer.h@{costmap\_2d/include/costmap\_2d/obstacle\_layer.h}}
\mbox{\hyperlink{obstacle__layer_8h}{浏览该文件的文档.}}
\begin{DoxyCode}{0}
\DoxyCodeLine{1 \textcolor{comment}{/*********************************************************************}}
\DoxyCodeLine{2 \textcolor{comment}{ *}}
\DoxyCodeLine{3 \textcolor{comment}{ * Software License Agreement (BSD License)}}
\DoxyCodeLine{4 \textcolor{comment}{ *}}
\DoxyCodeLine{5 \textcolor{comment}{ *  Copyright (c) 2008, 2013, Willow Garage, Inc.}}
\DoxyCodeLine{6 \textcolor{comment}{ *  All rights reserved.}}
\DoxyCodeLine{7 \textcolor{comment}{ *}}
\DoxyCodeLine{8 \textcolor{comment}{ *  Redistribution and use in source and binary forms, with or without}}
\DoxyCodeLine{9 \textcolor{comment}{ *  modification, are permitted provided that the following conditions}}
\DoxyCodeLine{10 \textcolor{comment}{ *  are met:}}
\DoxyCodeLine{11 \textcolor{comment}{ *}}
\DoxyCodeLine{12 \textcolor{comment}{ *   * Redistributions of source code must retain the above copyright}}
\DoxyCodeLine{13 \textcolor{comment}{ *     notice, this list of conditions and the following disclaimer.}}
\DoxyCodeLine{14 \textcolor{comment}{ *   * Redistributions in binary form must reproduce the above}}
\DoxyCodeLine{15 \textcolor{comment}{ *     copyright notice, this list of conditions and the following}}
\DoxyCodeLine{16 \textcolor{comment}{ *     disclaimer in the documentation and/or other materials provided}}
\DoxyCodeLine{17 \textcolor{comment}{ *     with the distribution.}}
\DoxyCodeLine{18 \textcolor{comment}{ *   * Neither the name of Willow Garage, Inc. nor the names of its}}
\DoxyCodeLine{19 \textcolor{comment}{ *     contributors may be used to endorse or promote products derived}}
\DoxyCodeLine{20 \textcolor{comment}{ *     from this software without specific prior written permission.}}
\DoxyCodeLine{21 \textcolor{comment}{ *}}
\DoxyCodeLine{22 \textcolor{comment}{ *  THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS}}
\DoxyCodeLine{23 \textcolor{comment}{ *  "{}AS IS"{} AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT}}
\DoxyCodeLine{24 \textcolor{comment}{ *  LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS}}
\DoxyCodeLine{25 \textcolor{comment}{ *  FOR A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE}}
\DoxyCodeLine{26 \textcolor{comment}{ *  COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT,}}
\DoxyCodeLine{27 \textcolor{comment}{ *  INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING,}}
\DoxyCodeLine{28 \textcolor{comment}{ *  BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;}}
\DoxyCodeLine{29 \textcolor{comment}{ *  LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER}}
\DoxyCodeLine{30 \textcolor{comment}{ *  CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT}}
\DoxyCodeLine{31 \textcolor{comment}{ *  LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN}}
\DoxyCodeLine{32 \textcolor{comment}{ *  ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE}}
\DoxyCodeLine{33 \textcolor{comment}{ *  POSSIBILITY OF SUCH DAMAGE.}}
\DoxyCodeLine{34 \textcolor{comment}{ *}}
\DoxyCodeLine{35 \textcolor{comment}{ * Author: Eitan Marder-\/Eppstein}}
\DoxyCodeLine{36 \textcolor{comment}{ *         David V. Lu!!}}
\DoxyCodeLine{37 \textcolor{comment}{ *********************************************************************/}}
\DoxyCodeLine{38 \textcolor{preprocessor}{\#ifndef COSTMAP\_2D\_OBSTACLE\_LAYER\_H\_}}
\DoxyCodeLine{39 \textcolor{preprocessor}{\#define COSTMAP\_2D\_OBSTACLE\_LAYER\_H\_}}
\DoxyCodeLine{40 }
\DoxyCodeLine{41 \textcolor{preprocessor}{\#include <ros/ros.h>}}
\DoxyCodeLine{42 \textcolor{preprocessor}{\#include <\mbox{\hyperlink{costmap__layer_8h}{costmap\_2d/costmap\_layer.h}}>}}
\DoxyCodeLine{43 \textcolor{preprocessor}{\#include <\mbox{\hyperlink{layered__costmap_8h}{costmap\_2d/layered\_costmap.h}}>}}
\DoxyCodeLine{44 \textcolor{preprocessor}{\#include <\mbox{\hyperlink{observation__buffer_8h}{costmap\_2d/observation\_buffer.h}}>}}
\DoxyCodeLine{45 }
\DoxyCodeLine{46 \textcolor{preprocessor}{\#include <nav\_msgs/OccupancyGrid.h>}}
\DoxyCodeLine{47 }
\DoxyCodeLine{48 \textcolor{preprocessor}{\#include <sensor\_msgs/LaserScan.h>}}
\DoxyCodeLine{49 \textcolor{preprocessor}{\#include <laser\_geometry/laser\_geometry.h>}}
\DoxyCodeLine{50 \textcolor{preprocessor}{\#include <sensor\_msgs/PointCloud.h>}}
\DoxyCodeLine{51 \textcolor{preprocessor}{\#include <sensor\_msgs/PointCloud2.h>}}
\DoxyCodeLine{52 \textcolor{preprocessor}{\#include <sensor\_msgs/point\_cloud\_conversion.h>}}
\DoxyCodeLine{53 \textcolor{preprocessor}{\#include <tf2\_ros/message\_filter.h>}}
\DoxyCodeLine{54 \textcolor{preprocessor}{\#include <message\_filters/subscriber.h>}}
\DoxyCodeLine{55 \textcolor{preprocessor}{\#include <dynamic\_reconfigure/server.h>}}
\DoxyCodeLine{56 \textcolor{preprocessor}{\#include <costmap\_2d/ObstaclePluginConfig.h>}}
\DoxyCodeLine{57 \textcolor{preprocessor}{\#include <\mbox{\hyperlink{footprint_8h}{costmap\_2d/footprint.h}}>}}
\DoxyCodeLine{58 }
\DoxyCodeLine{59 \textcolor{keyword}{namespace }\mbox{\hyperlink{namespacecostmap__2d}{costmap\_2d}}}
\DoxyCodeLine{60 \{}
\DoxyCodeLine{61 }
\DoxyCodeLine{62 \textcolor{keyword}{class }\mbox{\hyperlink{classcostmap__2d_1_1_obstacle_layer}{ObstacleLayer}} : \textcolor{keyword}{public} \mbox{\hyperlink{classcostmap__2d_1_1_costmap_layer}{CostmapLayer}}}
\DoxyCodeLine{63 \{}
\DoxyCodeLine{64 \textcolor{keyword}{public}:}
\DoxyCodeLine{65   \mbox{\hyperlink{classcostmap__2d_1_1_obstacle_layer_a4620782e96fabeb0b449daa725857c00}{ObstacleLayer}}()}
\DoxyCodeLine{66   \{}
\DoxyCodeLine{67     \textcolor{comment}{// 将障碍层设置为空值}}
\DoxyCodeLine{68     \mbox{\hyperlink{classcostmap__2d_1_1_costmap2_d_a34c8633b0dfec7481300d401d33010c7}{costmap\_}} = NULL;  \textcolor{comment}{// this is the unsigned char* member of parent class Costmap2D.}}
\DoxyCodeLine{69   \}}
\DoxyCodeLine{70 }
\DoxyCodeLine{71   \textcolor{keyword}{virtual} \mbox{\hyperlink{classcostmap__2d_1_1_obstacle_layer_a304eaae6240f4404b316c5692d8d4dbf}{\string~ObstacleLayer}}();}
\DoxyCodeLine{72   \textcolor{keyword}{virtual} \textcolor{keywordtype}{void} \mbox{\hyperlink{classcostmap__2d_1_1_obstacle_layer_a370822e3b19d717ef04311b7b967f496}{onInitialize}}();}
\DoxyCodeLine{73   \textcolor{keyword}{virtual} \textcolor{keywordtype}{void} \mbox{\hyperlink{classcostmap__2d_1_1_obstacle_layer_a1bfef13f020e8aa64a33743f72824ebd}{updateBounds}}(\textcolor{keywordtype}{double} robot\_x, \textcolor{keywordtype}{double} robot\_y, \textcolor{keywordtype}{double} robot\_yaw, \textcolor{keywordtype}{double}* min\_x, \textcolor{keywordtype}{double}* min\_y,}
\DoxyCodeLine{74                             \textcolor{keywordtype}{double}* max\_x, \textcolor{keywordtype}{double}* max\_y);}
\DoxyCodeLine{75   \textcolor{keyword}{virtual} \textcolor{keywordtype}{void} \mbox{\hyperlink{classcostmap__2d_1_1_obstacle_layer_a02fbdf76db69ddc03c400b2c00e903ee}{updateCosts}}(\mbox{\hyperlink{classcostmap__2d_1_1_costmap2_d}{costmap\_2d::Costmap2D}}\& master\_grid, \textcolor{keywordtype}{int} min\_i, \textcolor{keywordtype}{int} min\_j, \textcolor{keywordtype}{int} max\_i, \textcolor{keywordtype}{int} max\_j);}
\DoxyCodeLine{76 }
\DoxyCodeLine{77   \textcolor{keyword}{virtual} \textcolor{keywordtype}{void} \mbox{\hyperlink{classcostmap__2d_1_1_obstacle_layer_a96d2b1af3b09d35e02e6d2fc8366195f}{activate}}();}
\DoxyCodeLine{78   \textcolor{keyword}{virtual} \textcolor{keywordtype}{void} \mbox{\hyperlink{classcostmap__2d_1_1_obstacle_layer_a4b5054749c568e2df8180c2a7c0e6177}{deactivate}}();}
\DoxyCodeLine{79   \textcolor{keyword}{virtual} \textcolor{keywordtype}{void} \mbox{\hyperlink{classcostmap__2d_1_1_obstacle_layer_a9eca6114b3d54c93504058a1754103e4}{reset}}();}
\DoxyCodeLine{80 }
\DoxyCodeLine{86   \textcolor{keywordtype}{void} \mbox{\hyperlink{classcostmap__2d_1_1_obstacle_layer_adf9bf6f5d231ae52d012320dd18fe047}{laserScanCallback}}(\textcolor{keyword}{const} sensor\_msgs::LaserScanConstPtr\& message,}
\DoxyCodeLine{87                          \textcolor{keyword}{const} boost::shared\_ptr<costmap\_2d::ObservationBuffer>\& buffer);}
\DoxyCodeLine{88 }
\DoxyCodeLine{94   \textcolor{keywordtype}{void} \mbox{\hyperlink{classcostmap__2d_1_1_obstacle_layer_ae83ee29b89e126ffbfb477aff5fafe92}{laserScanValidInfCallback}}(\textcolor{keyword}{const} sensor\_msgs::LaserScanConstPtr\& message,}
\DoxyCodeLine{95                                  \textcolor{keyword}{const} boost::shared\_ptr<ObservationBuffer>\& buffer);}
\DoxyCodeLine{96 }
\DoxyCodeLine{102   \textcolor{keywordtype}{void} \mbox{\hyperlink{classcostmap__2d_1_1_obstacle_layer_acad6bfccd40caba4e3357e7b48981c2a}{pointCloudCallback}}(\textcolor{keyword}{const} sensor\_msgs::PointCloudConstPtr\& message,}
\DoxyCodeLine{103                           \textcolor{keyword}{const} boost::shared\_ptr<costmap\_2d::ObservationBuffer>\& buffer);}
\DoxyCodeLine{104 }
\DoxyCodeLine{110   \textcolor{keywordtype}{void} \mbox{\hyperlink{classcostmap__2d_1_1_obstacle_layer_aa8d27200c8f888b3bda5c4fc087f59a9}{pointCloud2Callback}}(\textcolor{keyword}{const} sensor\_msgs::PointCloud2ConstPtr\& message,}
\DoxyCodeLine{111                            \textcolor{keyword}{const} boost::shared\_ptr<costmap\_2d::ObservationBuffer>\& buffer);}
\DoxyCodeLine{112 }
\DoxyCodeLine{113   \textcolor{comment}{// 该函数用于测试目的}}
\DoxyCodeLine{114   \textcolor{keywordtype}{void} \mbox{\hyperlink{classcostmap__2d_1_1_obstacle_layer_ac835aba4f43e4c8a2a8ed66c97899b5f}{addStaticObservation}}(\mbox{\hyperlink{classcostmap__2d_1_1_observation}{costmap\_2d::Observation}}\& obs, \textcolor{keywordtype}{bool} marking, \textcolor{keywordtype}{bool} clearing);}
\DoxyCodeLine{115   \textcolor{keywordtype}{void} \mbox{\hyperlink{classcostmap__2d_1_1_obstacle_layer_a46aa43c6240307253b9bf9377f5e6969}{clearStaticObservations}}(\textcolor{keywordtype}{bool} marking, \textcolor{keywordtype}{bool} clearing);}
\DoxyCodeLine{116 }
\DoxyCodeLine{117 \textcolor{keyword}{protected}:}
\DoxyCodeLine{118   \textcolor{keyword}{virtual} \textcolor{keywordtype}{void} \mbox{\hyperlink{classcostmap__2d_1_1_obstacle_layer_a8a24f6bb0bd8600154c21af4638708c2}{setupDynamicReconfigure}}(ros::NodeHandle\& nh);}
\DoxyCodeLine{119 }
\DoxyCodeLine{125   \textcolor{keywordtype}{bool} \mbox{\hyperlink{classcostmap__2d_1_1_obstacle_layer_ad697514e2077c33ec3e50ed7ef661d19}{getMarkingObservations}}(std::vector<costmap\_2d::Observation>\& marking\_observations) \textcolor{keyword}{const};}
\DoxyCodeLine{126 }
\DoxyCodeLine{132   \textcolor{keywordtype}{bool} \mbox{\hyperlink{classcostmap__2d_1_1_obstacle_layer_ac36f129eecc398e3fd4c235078be29e4}{getClearingObservations}}(std::vector<costmap\_2d::Observation>\& clearing\_observations) \textcolor{keyword}{const};}
\DoxyCodeLine{133 }
\DoxyCodeLine{142   \textcolor{keyword}{virtual} \textcolor{keywordtype}{void} \mbox{\hyperlink{classcostmap__2d_1_1_obstacle_layer_a50dac229133e7c22981b0c7e0eafc910}{raytraceFreespace}}(\textcolor{keyword}{const} \mbox{\hyperlink{classcostmap__2d_1_1_observation}{costmap\_2d::Observation}}\& clearing\_observation, \textcolor{keywordtype}{double}* min\_x, \textcolor{keywordtype}{double}* min\_y,}
\DoxyCodeLine{143                                  \textcolor{keywordtype}{double}* max\_x, \textcolor{keywordtype}{double}* max\_y);}
\DoxyCodeLine{144 }
\DoxyCodeLine{145   \textcolor{keywordtype}{void} \mbox{\hyperlink{classcostmap__2d_1_1_obstacle_layer_aadace7301e7b08f358ea3e9e8a17f452}{updateRaytraceBounds}}(\textcolor{keywordtype}{double} ox, \textcolor{keywordtype}{double} oy, \textcolor{keywordtype}{double} wx, \textcolor{keywordtype}{double} wy, \textcolor{keywordtype}{double} range, \textcolor{keywordtype}{double}* min\_x, \textcolor{keywordtype}{double}* min\_y,}
\DoxyCodeLine{146                             \textcolor{keywordtype}{double}* max\_x, \textcolor{keywordtype}{double}* max\_y);}
\DoxyCodeLine{147 }
\DoxyCodeLine{148   std::vector<geometry\_msgs::Point> \mbox{\hyperlink{classcostmap__2d_1_1_obstacle_layer_a1a6a5dfdeaf6318a5ce08289a8416295}{transformed\_footprint\_}};}
\DoxyCodeLine{149   \textcolor{keywordtype}{bool} \mbox{\hyperlink{classcostmap__2d_1_1_obstacle_layer_ae2eef96b7091abd5e2df3902ffb0ac29}{footprint\_clearing\_enabled\_}};}
\DoxyCodeLine{150   \textcolor{keywordtype}{void} \mbox{\hyperlink{classcostmap__2d_1_1_obstacle_layer_ac81261d46ebc829ca1d747c024a00603}{updateFootprint}}(\textcolor{keywordtype}{double} robot\_x, \textcolor{keywordtype}{double} robot\_y, \textcolor{keywordtype}{double} robot\_yaw, \textcolor{keywordtype}{double}* min\_x, \textcolor{keywordtype}{double}* min\_y,}
\DoxyCodeLine{151                        \textcolor{keywordtype}{double}* max\_x, \textcolor{keywordtype}{double}* max\_y);}
\DoxyCodeLine{152 }
\DoxyCodeLine{153   std::string \mbox{\hyperlink{classcostmap__2d_1_1_obstacle_layer_ace3e2a9b2ded21743140a558a47bc54c}{global\_frame\_}};  }
\DoxyCodeLine{154   \textcolor{keywordtype}{double} \mbox{\hyperlink{classcostmap__2d_1_1_obstacle_layer_ad3c33d01e6f8c73a73a0c34140b88fd9}{max\_obstacle\_height\_}};  }
\DoxyCodeLine{155 }
\DoxyCodeLine{156   \textcolor{comment}{// 用于将激光扫描到的信息投影到点云集中}}
\DoxyCodeLine{157   laser\_geometry::LaserProjection \mbox{\hyperlink{classcostmap__2d_1_1_obstacle_layer_a04fe55b7286265ff543ad52b0b327642}{projector\_}};  \textcolor{comment}{// 用于将激光数据到的信息投影转换到点云集中}}
\DoxyCodeLine{158 }
\DoxyCodeLine{159   \textcolor{comment}{// 用于观察消息筛选器}}
\DoxyCodeLine{160   std::vector<boost::shared\_ptr<message\_filters::SubscriberBase> > \mbox{\hyperlink{classcostmap__2d_1_1_obstacle_layer_ad5128763fa389b51ef1e0b70765901b8}{observation\_subscribers\_}};}
\DoxyCodeLine{161   \textcolor{comment}{// 用于确保每个传感器都可以使用变换}}
\DoxyCodeLine{162   std::vector<boost::shared\_ptr<tf2\_ros::MessageFilterBase> > \mbox{\hyperlink{classcostmap__2d_1_1_obstacle_layer_a7a1721eda53cf4e9e0446b61f197a7e6}{observation\_notifiers\_}};}
\DoxyCodeLine{163   \textcolor{comment}{// 用于存储来自各种传感器的观测值}}
\DoxyCodeLine{164   std::vector<boost::shared\_ptr<costmap\_2d::ObservationBuffer> > \mbox{\hyperlink{classcostmap__2d_1_1_obstacle_layer_a0374c0cca8722ad5e03612cd8ddaef63}{observation\_buffers\_}};}
\DoxyCodeLine{165   \textcolor{comment}{// 用于存储用于标记障碍物的观察缓冲器}}
\DoxyCodeLine{166   std::vector<boost::shared\_ptr<costmap\_2d::ObservationBuffer> > \mbox{\hyperlink{classcostmap__2d_1_1_obstacle_layer_aa29c6e8de64c83c5cada0a51a07fa12e}{marking\_buffers\_}};}
\DoxyCodeLine{167   \textcolor{comment}{// 用于存储用于清除障碍物的观察缓冲器}}
\DoxyCodeLine{168   std::vector<boost::shared\_ptr<costmap\_2d::ObservationBuffer> > \mbox{\hyperlink{classcostmap__2d_1_1_obstacle_layer_acf2875689509edd4c22032b46d6d5a96}{clearing\_buffers\_}};}
\DoxyCodeLine{169 }
\DoxyCodeLine{170   \textcolor{comment}{// 仅用于测试目的的观测向量}}
\DoxyCodeLine{171   std::vector<costmap\_2d::Observation> \mbox{\hyperlink{classcostmap__2d_1_1_obstacle_layer_a95578ec2f3218aeebe2e95c3088256ca}{static\_clearing\_observations\_}}, \mbox{\hyperlink{classcostmap__2d_1_1_obstacle_layer_a25b798557229f62414d59663b392ea08}{static\_marking\_observations\_}};}
\DoxyCodeLine{172 }
\DoxyCodeLine{173   \textcolor{keywordtype}{bool} \mbox{\hyperlink{classcostmap__2d_1_1_obstacle_layer_a55c8ebe46b6d32861819d244fa55d18c}{rolling\_window\_}};}
\DoxyCodeLine{174   dynamic\_reconfigure::Server<costmap\_2d::ObstaclePluginConfig> *\mbox{\hyperlink{classcostmap__2d_1_1_obstacle_layer_a78167cc2c7d1ea1ea46a96de5870a1a2}{dsrv\_}};}
\DoxyCodeLine{175 }
\DoxyCodeLine{176   \textcolor{keywordtype}{int} \mbox{\hyperlink{classcostmap__2d_1_1_obstacle_layer_a5409807e0d5da47a5594b6558eb86e35}{combination\_method\_}};}
\DoxyCodeLine{177 }
\DoxyCodeLine{178 \textcolor{keyword}{private}:}
\DoxyCodeLine{179   \textcolor{keywordtype}{void} \mbox{\hyperlink{classcostmap__2d_1_1_obstacle_layer_a44529d13388d525090b766fd0bce12e9}{reconfigureCB}}(costmap\_2d::ObstaclePluginConfig \&config, uint32\_t level);}
\DoxyCodeLine{180 \};}
\DoxyCodeLine{181 }
\DoxyCodeLine{182 \}  \textcolor{comment}{// namespace costmap\_2d}}
\DoxyCodeLine{183 }
\DoxyCodeLine{184 \textcolor{preprocessor}{\#endif  }\textcolor{comment}{// COSTMAP\_2D\_OBSTACLE\_LAYER\_H\_}}

\end{DoxyCode}
